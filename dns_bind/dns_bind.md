Цель:
Настроить DNS-сервер на примере пакета Bind из состава операционной системы Debian или Ubuntu:
   Настроить прямое и обратное разрешение имён DNS-сервера в соответствии с таблицей:
1. Переключение на суперпользователя root, если зашли на сервер не от рута:
```
sudo su -l
```
1. Установка и запуск панельного файлового менеджера и редактора mc
```
apt update

apt install mc

mc
```
3. Установка сервера DNS:
```
apt install bind9 bind9-host
```
4. Найти расположение файлов конфигурации Bind, для этого запустить панельный менеджер mc, затем набрать в командной строке:
```
cd /etc/bind
```
В каталоге нам понадобятся следующие файлы конфигурации:

named.conf.default-zones - описание зон, сюда впишем новые зоны;
named.conf.options - конфигурация DNS сервера;
db.local - прямая зона для локального интерфейса localhost, на основе этого файла сделаем свою прямую зону;
db.127 - обратная зона для локального интерфейса localhost, на основе этого файла сделаем свою обратную зону.
5. Добавить описание зон в конфигурацию /etc/bind/named.conf.default-zones

В файл конфигурации /etc/bind/named.conf.default-zones прописать ноые зоны с ссылками на новые файлы зон /etc/bind/db.server  и  /etc/bind/db.10  (которые создадим далее):
```
zone "server.com" {
       type master;
       file "/etc/bind/db.server";
};

zone "2.0.10.in-addr.arpa" {
       type master;
       file "/etc/bind/db.10";
};
```
6. Необходимо создать прямую зону для домена server.com, на основе прямой локальной зоны /etc/bind/db.local:

Скопировать /etc/bind/db.local в /etc/bind/db.server командой:
```
cp db.local db.server
```
Затем из файла зоны db.server удалить лишние строки, которые относились к локальному преобразованию localhost и 127.0.0.1 и добавить в файлы необходимые записи по заданию:
```
@       IN     NS      server.com.
@        IN     A       10.0.2.15
local    IN     A       10.0.2.15
www      IN     CNAME   server.com.
sites    IN     CNAME   www.server.com.
```
7. Необходимо создать обратную зону для подсети 10.0.2.0/24, на основе обратйно локальной зоны /etc/bind/db.127:

Скопировать /etc/bind/db.local в /etc/bind/db.server командой:

cp db.127 db.10

Затем из файла зоны db.10 удалить лишние строки, которые относились к локальному преобразованию localhost и 127.0.0.1 и добавить в файлы необходимые записи по заданию:

@       IN      NS      server.com.
15      IN      PTR     server.com.

8. Необходимо прописать пересылку запросов, которые не входят в порписанные зоны, на внешний DNS-сервер 8.8.8.8:

Отредактировать файл /etc/bind/named.conf.options, найти и раскомментировать параметр forwarders, прописать сервер 8.8.8.8:
```
forwarders {
         8.8.8.8;
};
```
9. Рестарт сервиса Bind:
```
systemctl restart bind9
```
Получение информации о сервисе Bind:
```
systemctl status bind9
```
Если возникли проблемы с сервисом, сервис не запускается или работает некорректно, команды тестирования зон не работают, необходимо проверить синтаксис файлов конфигурации Bind, изучить вывод команд:
```
journalctl -xe

tail -f /var/log/syslog

tail -f /var/log/daemon.log
```
10. Тестирование работоспособности сервиса:
```
host <ip или имя> localhost
```
Например для команды host www.server.com localhost должен быть получен такой результат:
```
www.server.com is an alias for server.com.
 server.com has address 10.0.2.15
```
Для команды host 10.0.2.15 localhost должен быть получен такой результат:
```
15.2.0.10.in-addr.arpa domain name pointer server.com.
```
Для команды host yandex.ru localhost должен быть получен такой результат:
```
yandex.ru has address 5.255.255.80
 yandex.ru has address 77.88.55.55
 ......
```
11. Файл конфигурации разрешения имён в операционной системе Linux:
```
/etc/resolv.conf
```
Для смены разрешения имён на локальный сервер необходимо убрать существующую строку nameserver и прописать в этот файл:
```
nameserver 127.0.0.1
```
Для проверки теперь можно использовать команду host без указания параметра сервера:
```
host 10.0.2.15

15.2.0.10.in-addr.arpa domain name pointer server.com.